<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Naruto: Shinobi Training PRO</title>
    <style>
        body { margin: 0; background: #1a1a1a; color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; overflow: hidden; }
        
        /* –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        #stats { padding: 15px; font-size: 24px; background: #222; width: 100%; text-align: center; border-bottom: 3px solid #d35400; font-weight: bold; position: relative; }
        
        /* –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∏–≥—Ä—ã (–≤–º–µ—Å—Ç–æ alert) */
        #msg-box { position: absolute; bottom: -40px; left: 50%; transform: translateX(-50%); background: #e67e22; color: white; padding: 5px 20px; border-radius: 0 0 10px 10px; font-size: 16px; display: none; z-index: 200; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }

        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        #game { 
            position: relative; width: 800px; height: 350px; 
            background: url('https://i.imgur.com/8D78Z8p.png') repeat-x; 
            background-size: cover;
            border-bottom: 10px solid #8B4513; 
            margin-top: 50px; overflow: hidden; cursor: pointer;
        }

        /* –ü–µ—Ä—Å–æ–Ω–∞–∂ */
        #player { 
            position: absolute; width: 80px; height: 80px; 
            bottom: 0; left: 50px; 
            background: url('https://media.giphy.com/media/tS9P4ZYRAACKA/giphy.gif') no-repeat; 
            background-size: contain; 
            z-index: 10;
        }

        /* –°—é—Ä–∏–∫–µ–Ω */
        .shuriken { 
            position: absolute; width: 45px; height: 45px; 
            background: url('https://i.imgur.com/vHTh7jC.png') no-repeat; 
            background-size: contain; 
            animation: spin 0.4s infinite linear; 
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* –≠–∫—Ä–∞–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (–ü–æ–±–µ–¥–∞/–ü–æ—Ä–∞–∂–µ–Ω–∏–µ) */
        .overlay { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); display: none; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 100; text-align: center;
        }
        .overlay h1 { font-size: 60px; margin-bottom: 10px; text-shadow: 0 0 20px currentColor; }
        
        .btn { 
            padding: 15px 30px; background: #e67e22; border: 2px solid #fff; 
            color: white; cursor: pointer; border-radius: 10px; 
            font-weight: bold; font-size: 20px; transition: 0.2s; margin: 10px;
        }
        .btn:hover { background: #d35400; transform: scale(1.05); }
        
        .shop { margin-top: 20px; display: flex; gap: 10px; }
    </style>
</head>
<body>

    <div id="stats">
        üí∞ –ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span> | ‚è±Ô∏è –í—Ä–µ–º—è: <span id="timer">30</span>—Å
        <div id="msg-box">–°–æ–æ–±—â–µ–Ω–∏–µ</div>
    </div>

    <div id="game" onclick="jump()">
        <div id="player"></div>
        
        <div id="over" class="overlay">
            <h1 style="color: #ff0000;">–ü–û–†–ê–ñ–ï–ù–ò–ï</h1>
            <p>–¢–≤–æ–µ –¥–∑—é—Ü—É –æ–∫–∞–∑–∞–ª–æ—Å—å —Å–ª–∞–±—ã–º...</p>
            <button class="btn" onclick="location.reload()">–ü–û–ü–†–û–ë–û–í–ê–¢–¨ –°–ù–û–í–ê</button>
        </div>

        <div id="win" class="overlay">
            <h1 style="color: #2ecc71;">–ú–ò–°–°–ò–Ø –í–´–ü–û–õ–ù–ï–ù–ê</h1>
            <p>–¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –Ω–∏–Ω–¥–∑—è –ö–æ–Ω–æ—Ö–∏!</p>
            <button class="btn" onclick="location.reload()">–°–õ–ï–î–£–Æ–©–ò–ô –£–†–û–í–ï–ù–¨</button>
        </div>
    </div>

    <div class="shop">
        <button class="btn" onclick="buy('https://media.giphy.com/media/11mB6clX6m7fPy/giphy.gif', 15)">–°–∞–∫—É—Ä–∞ (15üí∞)</button>
        <button class="btn" onclick="buy('https://media.giphy.com/media/U7S86m87A4S76/giphy.gif', 30)">–ö–∞–∫–∞—à–∏ (30üí∞)</button>
        <button class="btn" onclick="buy('https://media.giphy.com/media/7S66f81Beb0t2/giphy.gif', 50)">–ò—Ç–∞—á–∏ (50üí∞)</button>
    </div>

<script>
    let coins = parseInt(localStorage.getItem('n_coins')) || 0;
    let isJumping = false;
    let isGameOver = false;
    let timeLeft = 30;

    const coinEl = document.getElementById('coins');
    const timerEl = document.getElementById('timer');
    const player = document.getElementById('player');
    const msgBox = document.getElementById('msg-box');

    coinEl.innerText = coins;

    function showMsg(text) {
        msgBox.innerText = text;
        msgBox.style.display = 'block';
        setTimeout(() => { msgBox.style.display = 'none'; }, 2000);
    }

    function jump() {
        if (isJumping || isGameOver) return;
        isJumping = true;
        let pos = 0;
        let up = setInterval(() => {
            if (pos >= 150) {
                clearInterval(up);
                let down = setInterval(() => {
                    if (pos <= 0) { clearInterval(down); isJumping = false; }
                    pos -= 7; player.style.bottom = pos + 'px';
                }, 20);
            }
            pos += 10; player.style.bottom = pos + 'px';
        }, 20);
    }

    function spawn() {
        if (isGameOver) return;
        const s = document.createElement('div');
        s.className = 'shuriken';
        let sx = 800;
        s.style.left = sx + 'px';
        s.style.bottom = (Math.random() > 0.5 ? '15px' : '75px');
        document.getElementById('game').appendChild(s);

        let move = setInterval(() => {
            if (isGameOver) { s.remove(); clearInterval(move); return; }
            sx -= 12;
            s.style.left = sx + 'px';

            if (sx < -50) {
                clearInterval(move);
                s.remove();
                coins++;
                coinEl.innerText = coins;
                localStorage.setItem('n_coins', coins);
            }

            let pr = player.getBoundingClientRect();
            let sr = s.getBoundingClientRect();
            if (pr.right > sr.left+15 && pr.left < sr.right-15 && pr.bottom > sr.top+15 && pr.top < sr.bottom-15) {
                isGameOver = true;
                document.getElementById('over').style.display = 'flex';
            }
        }, 20);
        setTimeout(spawn, 1000 + Math.random() * 1000);
    }

    function buy(gifUrl, price) {
        if (coins >= price) {
            coins -= price;
            coinEl.innerText = coins;
            localStorage.setItem('n_coins', coins);
            player.style.backgroundImage = url('${gifUrl}');
            showMsg("–°–∫–∏–Ω –∏–∑–º–µ–Ω–µ–Ω! ‚ú®");
        } else {
            showMsg("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! ‚ùå");
        }
    }

    let clock = setInterval(() => {
        if (isGameOver) return;
        timeLeft--;
        timerEl.innerText = timeLeft;
        if (timeLeft <= 0) { 
            clearInterval(clock);
            isGameOver = true;
            document.getElementById('win').style.display = 'flex';
        }
    }, 1000);

    document.addEventListener('keydown', (e) => { if(e.code === 'Space') jump(); });
    spawn();
</script>
</body>
</html>
